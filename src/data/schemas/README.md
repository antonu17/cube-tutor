# JSON Data Schemas

This directory contains JSON Schema definitions for Cube Tutor's data structures.

## Schemas

### `puzzle.schema.json`

Defines a twisty puzzle (e.g., 3x3x3 Rubik's Cube).

**Required Fields:**
- `id` - Unique identifier (lowercase, hyphens allowed)
- `name` - Display name
- `description` - Brief description
- `supportedMethods` - Array of method IDs

**Optional Fields:**
- `notation` - Notation system (defaults to "WCA")

**Example:**
```json
{
  "id": "3x3x3",
  "name": "3×3×3 Cube",
  "description": "The standard Rubik's Cube",
  "notation": "WCA",
  "supportedMethods": ["beginner", "cfop"]
}
```

### `method.schema.json`

Defines a solving method (e.g., CFOP, Beginner's Method).

**Required Fields:**
- `id` - Unique identifier
- `name` - Display name
- `description` - Detailed description
- `puzzleId` - ID of the puzzle this method applies to

**Optional Fields:**
- `difficulty` - Difficulty level (1-5)
- `stages` - Array of stages/phases

**Example:**
```json
{
  "id": "cfop",
  "name": "CFOP Method",
  "description": "Advanced speedsolving method using Cross, F2L, OLL, PLL",
  "puzzleId": "3x3x3",
  "difficulty": 4,
  "stages": [
    {
      "id": "cross",
      "name": "Cross",
      "description": "Solve the white cross on bottom",
      "order": 1
    }
  ]
}
```

### `case.schema.json`

Defines an algorithm case (e.g., OLL 21, T-Perm).

**Required Fields:**
- `id` - Unique identifier
- `name` - Display name
- `method` - Method this case belongs to
- `algorithms` - Array of algorithm objects
- `difficulty` - Difficulty level (1-5)

**Optional Fields:**
- `stage` - Stage/phase within method (e.g., "oll", "pll")
- `category` - Shape category (e.g., "dot", "line")
- `recognitionHints` - Array of recognition tips
- `setupMoves` - Algorithm to create this case from solved
- `probability` - Probability of encountering (0-1)

**Algorithm Object:**
- `notation` - WCA notation string
- `moves` - Parsed moves array (generated by parser)
- `source` - Source of algorithm (optional)
- `recommended` - Whether this is the primary algorithm (optional)

**Example:**
```json
{
  "id": "oll-21",
  "name": "OLL 21",
  "method": "cfop",
  "stage": "oll",
  "category": "line",
  "difficulty": 2,
  "algorithms": [
    {
      "notation": "R U R' U R U' R' U R U2 R'",
      "moves": [],
      "source": "SpeedCubeDB",
      "recommended": true
    }
  ],
  "recognitionHints": [
    "Line of yellow on top",
    "Cross pattern on front"
  ],
  "setupMoves": "R U R' U'",
  "probability": 0.0185
}
```

## Validation

Use these schemas to validate JSON data files. The cube engine's validator can check that algorithms are valid WCA notation.

## File Naming Convention

- Puzzles: `src/data/puzzles/{puzzle-id}.json`
- Methods: `src/data/methods/{puzzle-id}/{method-id}.json`
- Algorithm Cases: `src/data/algorithms/{method-id}/{stage-id}/{case-id}.json`

Or collections:
- All OLL cases: `src/data/algorithms/cfop/oll/all-cases.json` (array)
- All PLL cases: `src/data/algorithms/cfop/pll/all-cases.json` (array)

## Notes

- Use lowercase with hyphens for IDs
- Keep descriptions concise but informative
- Always include at least one algorithm per case
- Mark the most commonly used algorithm as `recommended: true`
- Probabilities should sum to 1.0 within each stage (e.g., all 57 OLLs)
